import{r as c,a as h,o as x,e as v,h as e,I as f,J as _,n as y,bw as b,k as g}from"./index.13e1aaad.js";import{a as w}from"./api.014cc687.js";const I={class:"container py-20 mx-auto"},S=e("h2",{class:"text-2xl font-bold text-center"},"Request For Access",-1),N=["onSubmit"],P={class:"space-y-2 form-control"},V=e("label",{for:"ttrx",class:""},"WebApp Access Code",-1),A=e("p",{class:"text-sm"},null,-1),C={class:"text-center"},q={setup(D){const a=c("");c("");const d=c(""),o=c(!1),l=h(),m=()=>{o.value=!0;let u="https://shop.aparsclassroom.com/query/";var r=new URLSearchParams;r.append("tran_id",a.value),r.append("email",d.value);var i={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r,redirect:"follow"};fetch(u+"transaction",i).then(t=>t.json()).then(t=>{t.status==200&&t.tranx.status=="VALID"&&(t.tranx.Product.productName=="varsityxm22"||t.tranx.Product.productName=="Varsity22")||t.no_of_trans_found==1&&(t.element[0].value_d.split("*,*")[1]=="Varsity22"||t.element[0].value_d.split("*,*")[1]=="varsityxm22")?l.push("/register?ttrx="+a.value):fetch(u+"email",i).then(n=>n.json()).then(n=>{let p=n.tranx.find(s=>s.Product.productName=="varsityxm22"||s.Product.productName=="Varsity22");n.status==200&&n.tranx.length>0&&p?l.push("/register?ttrx="+p.tran_id):g.get(`${w}?ttrx=${a.value}`).then(s=>{if(s.data){if(s.data.ttrx){localStorage.setItem("varsityguccho_exam_22",JSON.stringify(s.data)),l.push("/");return}l.push("/register?ttrx="+a.value)}else alert("\u09B8\u09A0\u09BF\u0995 \u098F\u0995\u09CD\u09B8\u09C7\u09B8 \u0995\u09CB\u09A1 \u09A6\u09BF\u09DF\u09C7 \u0986\u09AC\u09BE\u09B0 \u099A\u09C7\u09B7\u09CD\u099F\u09BE \u0995\u09B0\u09C1\u09A8\u0964"),o.value=!1;o.value=!1}).catch(s=>{alert("Invalid Group Joining ID"),o.value=!1})})}).catch(t=>alert("Invalid Group Joining ID"))};return(u,r)=>(x(),v("div",I,[S,e("form",{onSubmit:b(m,["prevent"]),class:"max-w-2xl mx-auto space-y-2"},[e("div",P,[V,A,f(e("input",{type:"text",placeholder:"Web Access Code","onUpdate:modelValue":r[0]||(r[0]=i=>a.value=i),class:"input input-bordered"},null,512),[[_,a.value]])]),e("div",C,[e("button",{type:"submit",class:y(["btn btn-primary",{loading:o.value}])},"Submit",2)])],40,N)]))}};export{q as default};
