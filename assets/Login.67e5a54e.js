import{r as c,a as h,o as x,e as v,h as t,I as _,J as f,n as y,bw as b,k as g}from"./index.c1ee71cb.js";import{a as w}from"./api.014cc687.js";const I={class:"container py-20 mx-auto"},P=t("h2",{class:"text-2xl font-bold text-center"},"Request For Access",-1),V=["onSubmit"],A={class:"space-y-2 form-control"},N=t("label",{for:"ttrx",class:""},"WebApp Access Code",-1),S=t("p",{class:"text-sm"},null,-1),C={class:"text-center"},B={setup(D){const s=c("");c("");const d=c(""),n=c(!1),i=h(),m=()=>{n.value=!0;let u="https://shop.aparsclassroom.com/query/";var a=new URLSearchParams;a.append("tran_id",s.value),a.append("email",d.value);var l={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a,redirect:"follow"};fetch(u+"transaction",l).then(e=>e.json()).then(e=>{e.status==200&&e.tranx.status=="VALID"&&(e.tranx.Product.productName=="varsityxm22"||e.tranx.Product.productName=="Varsity22")||e.no_of_trans_found==1&&(e.element[0].value_d.split("*,*")[1]=="Varsity22"||e.element[0].value_d.split("*,*")[1]=="varsityxm22")?i.push("/register?ttrx="+s.value):fetch(u+"email",l).then(o=>o.json()).then(o=>{let p=o.tranx.find(r=>r.Product.productName=="varsityxm22"||r.Product.productName=="Varsity22");o.status==200&&o.tranx.length>0&&p?i.push("/register?ttrx="+p.tran_id):g.get(`${w}?ttrx=${s.value}`).then(r=>{r.data.status=="success"?i.push("/register?ttrx="+s.value):alert(r.data.message),n.value=!1}).catch(r=>{alert("Invalid Group Joining ID"),n.value=!1})})}).catch(e=>alert("Invalid Group Joining ID"))};return(u,a)=>(x(),v("div",I,[P,t("form",{onSubmit:b(m,["prevent"]),class:"max-w-2xl mx-auto space-y-2"},[t("div",A,[N,S,_(t("input",{type:"text",placeholder:"Web Access Code","onUpdate:modelValue":a[0]||(a[0]=l=>s.value=l),class:"input input-bordered"},null,512),[[f,s.value]])]),t("div",C,[t("button",{type:"submit",class:y(["btn btn-primary",{loading:n.value}])},"Submit",2)])],40,V)]))}};export{B as default};
